<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="assets\css\style.css" rel="stylesheet">
    <!-- Bootstrap -->
    <!-- https://getbootstrap.com/docs/5.2 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    
    <!-- FontAwesome -->
    <!-- https://fontawesome.com/v6/search?m=free -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="assets/js/load" type="text/javascript"></script>
    <title>WebML</title>
</head>
<body>
    <div class="d-flex loading justify-content-center align-items-center">
        <i class="fa-solid fa-spinner fa-spin-pulse fa-5x"></i>
    </div>
    <nav class="navbar border-bottom border-dark bg-light">
        <div class="container-fluid">
            <a href="/" class="navbar-brand" data-bs-toggle="tooltip" title=" Volver al dashboard">
                <img class="d-inline-block" src="assets\img\logo_ml.webp" height="40px">
            </a>
            <div class="nav-data">
                <p><i class="fa fa-user-tie"></i> <span>Gabriel Abaca</span></p>
                <p><i class="fa fa-calendar-days"></i> <span>12/07/2022</span></p>
               </div>
        </div>
    </nav>

    <section class="section-rendicion">
        <div class="container pt-3 pb-3">
            <div class="text-center mt-1 mb-3">
            <h2>Detalle de Transacciones a Rendir</h2>
            </div>
        </div>
        <div class="d-flex flex-column align-items-center justify-content-center h-100">
        <div class="col-11 col-lg-5">
        <form>
        <div class="row g-2 border p-1 pb-3 rounded box">
        <table class="table">
            
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Info</th>
                    <th>Totales</th>
                </tr>
            </thead>
            <tbody>
                <tr 
                data-efectivo="100"
                data-tarjeta="200"
                data-qr="300"
                data-sn-planilla="1111">
                    <th>11/7/22</th>
                    <td>
                            <ul>
                            <li>Tipo: <small>Comercio</small></li>
                            <li>Direccion: <small>Av F de la cruz 1146</small></li>
                            <li>ComproPoint: <small>1</small></li>
                            <li>Point-AJ: <small>2</small></li>
                            <li>Point-MN: <small>2</small></li>
                            <li>Point-SM: <small>2</small></li>
                            <li>Point-BT <small>2</small></li>
                            </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Efectivo: <small>$100</small></li>
                            <li>Tarjeta: <small>$200</small></li>
                            <li>QR: <small></small>$300</li>
                        </ul>
                    </td>
                </tr>
                <tr 
                data-efectivo="100"
                data-tarjeta="200"
                data-qr="300"
                data-sn-planilla="2222">
                    <th>11/7/22</th>
                    <td>
                            <ul>
                            <li>Tipo: <small>Comercio</small></li>
                            <li>Direccion: <small>Av F de la cruz 1146</small></li>
                            <li>ComproPoint: <small>1</small></li>
                            <li>Point-AJ: <small>2</small></li>
                            <li>Point-MN: <small>2</small></li>
                            <li>Point-SM: <small>2</small></li>
                            <li>Point-BT <small>2</small></li>
                            </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Efectivo: <small>$100</small></li>
                            <li>Tarjeta: <small>$200</small></li>
                            <li>QR: <small></small>$300</li>
                        </ul>
                    </td>
                </tr>
                <tr 
                data-efectivo="100"
                data-tarjeta="200"
                data-qr="300"
                data-sn-planilla="3333">
                    <th>11/7/22</th>
                    <td>
                            <ul>
                            <li>Tipo: <small>Comercio</small></li>
                            <li>Direccion: <small>Av F de la cruz 1146</small></li>
                            <li>ComproPoint: <small>1</small></li>
                            <li>Point-AJ: <small>2</small></li>
                            <li>Point-MN: <small>2</small></li>
                            <li>Point-SM: <small>2</small></li>
                            <li>Point-BT <small>2</small></li>
                            </ul>
                    </td>
                    <td>
                        <ul>
                            <li>Efectivo: <small>$100</small></li>
                            <li>Tarjeta: <small>$200</small></li>
                            <li>QR: <small></small>$300</li>
                        </ul>
                    </td>
                </tr>

            </tbody>
            
        </table>
        <p id="totalEfectivo">Efectivo: $<span>0</span></p>
        <p id="totalTarjeta">Tarjeta: $<span>0</span></p>
        <p id="totalQr">QR: $<span>0</span></p>
    </div>
    <div class="d-flex flex-row col-12 justify-content-center buttons-f">
                  
        <button disabled class="btn-small" type="submit" > 
          <i class="fa fa-check-circle fa-2x"></i> 
          <span class="label bottom">Rendir</span> 
        </button>
        <button class="btn-small" type="button" onclick="window.location.href='/'"> 
          <i class="fa fa-circle-chevron-left fa-2x last"></i>  
          <span class="label bottom">Volver</span> 
        </button>
      
      </div>
    </form>  
        </div>
        </div>
    </section>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js" integrity="sha512-6PM0qYu5KExuNcKt5bURAoT6KCThUmHRewN3zUFNaoI6Di7XJPTMoT6K0nsagZKk2OB4L7E3q1uQKHNHd4stIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/conflict-detection.min.js" integrity="sha512-uf3F0AGh2mKjvRADOUBQMavmoKTm92Ud1tsRu4PZqltqjbP+ZYj+5i3ph6EE7Oto4hkpFPr6DEVlbw47i5SlAg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript">
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>

<script type="text/javascript">
    
    var buttonsPlanillas = [].slice.call(document.querySelectorAll('table tr'))
    var planillas = [];
    var efectivo = Number(0);
    var tarjeta = Number(0);
    var qr = Number(0);
    var form = document.querySelector('form');

    document.querySelector('form [type="submit"]').addEventListener('click', (event) =>{
        console.log(event)
    });
    Array.from(buttonsPlanillas).forEach(link => {
    link.addEventListener('click', (event) => {
            selectPlanilla(link)
        });
    });
    
    function selectPlanilla(tr){
        if (planillas.find(val => val === tr.dataset.snPlanilla)){
            
            planillas = planillas.filter(item => item !== tr.dataset.snPlanilla)
            
            if(tr.dataset.efectivo){
                efectivo -= Number(tr.dataset.efectivo);
            }
            if(tr.dataset.tarjeta){
                tarjeta -= Number(tr.dataset.tarjeta);
            }
            if(tr.dataset.qr){
                qr -= Number(tr.dataset.qr);
            }

            tr.classList.remove('list-group-item-success')
            document.getElementById(tr.dataset.snPlanilla).remove()
            document.querySelector('#totalEfectivo span').innerHTML = efectivo
            document.querySelector('#totalTarjeta span').innerHTML = efectivo
            document.querySelector('#totalQr span').innerHTML = efectivo
            if (planillas.length==0){
                    document.querySelector('form [type="submit"]').setAttribute('disabled','')
                }
        }else{
            planillas.push(tr.dataset.snPlanilla)
            tr.classList.add('list-group-item-success')
            document.querySelector('form [type="submit"]').removeAttribute('disabled')
            var input = document.createElement('input')
            
            input.setAttribute('type', 'number')
            input.setAttribute('value',tr.dataset.snPlanilla)
            input.setAttribute('id', tr.dataset.snPlanilla)
            input.setAttribute('hidden','')

            if(tr.dataset.efectivo){
                efectivo += Number(tr.dataset.efectivo);
            }
            if(tr.dataset.tarjeta){
                tarjeta += Number(tr.dataset.tarjeta);
            }
            if(tr.dataset.qr){
                qr += Number(tr.dataset.qr);
            }
            form.appendChild(input)

            document.querySelector('#totalEfectivo span').innerHTML = efectivo
            document.querySelector('#totalTarjeta span').innerHTML = efectivo
            document.querySelector('#totalQr span').innerHTML = efectivo
        }
    }

</script>
</html>