<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="assets\css\style.css" rel="stylesheet">
    
    <!-- Bootstrap -->
    <!-- https://getbootstrap.com/docs/5.2 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    
    <!-- FontAwesome -->
    <!-- https://fontawesome.com/v6/search?m=free -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="assets/js/load" type="text/javascript"></script>
    <title>WebML</title>
</head>
<body>
    <div class="d-flex loading justify-content-center align-items-center">
        <i class="fa-solid fa-spinner fa-spin-pulse fa-5x"></i>
      </div>

    <nav class="navbar border-bottom border-dark bg-light">
        <div class="container-fluid">
            <a href="/" class="navbar-brand" data-bs-toggle="tooltip" title=" Volver al dashboard">
                <img class="d-inline-block" src="assets\img\logo_ml.webp" height="40px">
            </a>
            <div class="nav-data">
                <p><i class="fa fa-user-tie"></i> <span>Gabriel Abaca</span></p>
                <p><i class="fa fa-calendar-days"></i> <span>12/07/2022</span></p>
               </div>
        </div>
    </nav>

    <div class="modal fade" id="modalRecibirInv" tabindex="-1"  aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header border-bottom">
              <h5 class="modal-title">Recibir Inventario</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form>
            <div class="modal-body">
                <div class="list-group">

                    <button type="button" class="list-group-item list-group-item-action border box list-group-item-secondary" aria-current="true"
                        data-inv-sn="1122333">
                        <div class="d-flex w-100 justify-content-between">
                          <h6 class="text-dark" >Inventario #1122333</h6>
                          <small><i class="fa fa-calendar"></i>17/8/22</small>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>SN</th>
                                    <th>Modelo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>1490674235</th>
                                    <td>Point SMART</td>
                                </tr>
                                <tr>
                                    <th>CHB283126004587</th>
                                    <td>Point MINI</td>
                                </tr>
                                <tr>
                                    <th>1490684833</th>
                                    <td>Point SMART</td>
                                </tr>
                
                            </tbody>
                            
                        </table>
                    </button>
                    
                </div>
            </div>
            <div class="modal-footer">
                    <button disabled type="submit" class="btn btn-success">Recibir Inventario</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
            </div>
            </form>
          </div>
        </div>
      </div>

      <div class="modal fade" id="modalDevolverInv" tabindex="-1"  aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Devolver Inventario</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form>
            <div class="modal-body">
                <div class="list-group">
                    <button type="button" class="list-group-item list-group-item-action list-group-item-secondary"
                        data-inv-sn="CHB283126008327"
                        data-inv-tipo="Point Mini">
                        CHB283126008327 <small>Point Mini</small>
                    </button>
                    <button type="button" class="list-group-item list-group-item-action list-group-item-secondary"
                        data-inv-sn="CHB283126043629"
                        data-inv-tipo="Point Mini">
                        CHB283126043629 <small>Point Mini</small>
                    </button>
                    <button type="button" class="list-group-item list-group-item-action list-group-item-secondary"
                        data-inv-sn="1490527858"
                        data-inv-tipo="Point Smart">
                        1490527858 <small>Point Smart</small>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                    <button disabled type="submit" class="btn btn-success">Devolver Inventario</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
            </div>
            </form>
          </div>
        </div>
      </div>

    <section class="section-inventario">
        <div class="container pt-3 pb-3">
            <div class="text-center mt-1 mb-3">
            <h2>Inventario Personal</h2>
            </div>
        </div>
        <div class="d-flex flex-column align-items-center justify-content-center h-100 ">
        <div class="col-11 col-lg-5">
            <div class="row g-2 border p-1 pb-3 rounded box">
            <table class="table">
            
                <thead>
                    <tr>
                        <th>Dispositivo</th>
                        <th>Tipo</th>
                        <th>Fecha de recepci√≥n </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>1490674235</th>
                        <td>Point SMART</td>
                        <td>11/7/22</td>
                        
                    </tr>
                    <tr>
                        <th>CHB283126004587</th>
                        <td>Point MINI</td>
                        <td>11/7/22</td>
                        
                    </tr>
                    <tr>
                        <th>1490684833</th>
                        <td>Point SMART</td>
                        <td>11/7/22</td>
                        
                    </tr>
    
                </tbody>
                
            </table>
            </div>
            <div class="d-flex flex-row flex-wrap justify-content-center buttons-f">
                
                <button class="btn-small btn-inventario " type="button" data-bs-toggle="modal" data-bs-target="#modalRecibirInv" > 
                    <i class="fa fa-boxes-stacked fa-2x "></i> 
                    <span class="label bottom">Recibir Inv.</span> 
                </button>

                <button class="btn-small btn-inventario" type="button" data-bs-toggle="modal" data-bs-target="#modalDevolverInv" > 
                    <i class="fa fa-boxes-stacked fa-2x"></i> 
                    <i class="fa fa-x fa-2x fa-stack-1x" style="color:Tomato"></i>
                  
                  <span class="label bottom">Devolver Inv.</span> 
                </button>
                
                <button class="btn-small" type="button" onClick="window.location.href='/'"> 
                    <i class="fa fa-circle-chevron-left fa-stack-1x fa-2x last"></i>  
                  <span class="label bottom">Volver</span> 
                </button>
              
            </div>
        </div>
        
        </div>
    </section>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js" integrity="sha512-6PM0qYu5KExuNcKt5bURAoT6KCThUmHRewN3zUFNaoI6Di7XJPTMoT6K0nsagZKk2OB4L7E3q1uQKHNHd4stIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/conflict-detection.min.js" integrity="sha512-uf3F0AGh2mKjvRADOUBQMavmoKTm92Ud1tsRu4PZqltqjbP+ZYj+5i3ph6EE7Oto4hkpFPr6DEVlbw47i5SlAg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript">
        
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        })
    </script>
    <script type="text/javascript">
    
        var linksDevolver = [].slice.call(document.querySelectorAll('[data-modal="showDevolver"]'))
        const modalDevolver = new bootstrap.Modal('#modalDevolverInv')
        
        var buttonsDevolverInventario = [].slice.call(document.querySelectorAll('#modalDevolverInv button'))
        var buttonsRecibirInventario = [].slice.call(document.querySelectorAll('#modalRecibirInv button'))
        var listSnDevolver = [];
        var listSnRecibir = [];

        Array.from(buttonsDevolverInventario).forEach(button => {
            if (button.dataset.invSn) {
                
                button.addEventListener('click', (event) => {
                    devolverInventario(button)
                })
            }
        });

        Array.from(buttonsRecibirInventario).forEach(button => {
            if (button.dataset.invSn) {
                
                button.addEventListener('click', (event) => {
                    recibirInventario(button)
                })
            }
        })

        function devolverInventario(button){
            
            if(Array.from(button.classList).find(val => val == 'list-group-item-success')){
                button.classList.remove('list-group-item-success')
                listSnDevolver = listSnDevolver.filter(item => item !== button.dataset.invSn)
                document.getElementById(button.dataset.invSn).remove()
                
                if (listSnDevolver.length==0){
                    document.querySelector('#modalDevolverInv [type="submit"]').setAttribute('disabled','')
                }
                
            }else{
                document.querySelector('#modalDevolverInv [type="submit"]').removeAttribute('disabled')
                button.classList.add('list-group-item-success')
                listSnDevolver.push(button.dataset.invSn)
                input = document.createElement('input')
                input.setAttribute('id',button.dataset.invSn)
                input.setAttribute('value',button.dataset.invSn)
                input.setAttribute('type', 'text')
                input.setAttribute('hidden','')
                document.querySelector('#modalDevolverInv form').appendChild(input)
                console.log(listSnDevolver)
            }
        }

        function recibirInventario(button){
            
            if(Array.from(button.classList).find(val => val == 'list-group-item-success')){
                button.classList.remove('list-group-item-success')
                listSnRecibir = listSnRecibir.filter(item => item !== button.dataset.invSn)
                document.getElementById(button.dataset.invSn).remove()
                console.log(listSnRecibir)
                if (listSnRecibir.length==0){
                    document.querySelector('#modalRecibirInv [type="submit"]').setAttribute('disabled','')
                }
                
            }else{
                document.querySelector('#modalRecibirInv [type="submit"]').removeAttribute('disabled')
                button.classList.add('list-group-item-success')
                listSnRecibir.push(button.dataset.invSn)
                input = document.createElement('input')
                input.setAttribute('id',button.dataset.invSn)
                input.setAttribute('value',button.dataset.invSn)
                input.setAttribute('type', 'text')
                input.setAttribute('hidden','')
                document.querySelector('#modalRecibirInv form').appendChild(input)
                console.log(listSnRecibir)
            }
        }
    </script>

    </html>